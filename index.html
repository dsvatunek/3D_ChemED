<!DOCTYPE html>
<html>
<head>
    <title>3D Model Viewer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="stripe">
        <h1>Test Website</h1>
        <img src="public/logo.svg" alt="Logo DIMENSIONS" width="700"/>
        <h3>Dr. Dennis Svatunek</h3>
        <h3><a href="https://www.dsvatunek.com/">dsvatunek.com</a></h3>
        <p>Tech demo for rotateable and interactive elements using different solutions.</p>
		<hr>
		<h2>Tech Demo 1</h2>
        <p>Rotateable high quality models. Slider allows to switch between models. Models rotate in unison. Perspective and orthographic view!<br>
        Realized by using three.js and glTF models. All kinds of models, e.g., lab equipment, possible. It is also possible to change the text depending on the displayed model.</p>

        <div id="container"></div>
        <p id="dynamic-text"></p>
        <div id="model-slider-container">
            <input id="model-slider" type="range" min="0" max="1" value="0" step="1">
        </div>
        <div class="checkbox-container">
            <input id="camera-toggle" type="checkbox"> 
            <label for="camera-toggle"><p>Switch to Orthographic Camera</p></label>
        </div>
		<hr>		
        <h2>Tech Demo 2</h2>
        <p>Dynamic reaction coordinate of the fluoride + ethylchloride SN2 reaction.</p>
        <div id="IRC" class="mol_container" style="height: 500px; width: 790px; position: relative"></div>
		<div id="frameText"></div>
        <input type="range" min="0" max="110" value="0" class="slider" id="IRC_slider" oninput="step_frame(this, 'IRC');" style="width: 400px;">
		<img src="public/slider.png" alt="use the slider to advance the reaction" width="400"/>
		<hr>
        <p>Please be aware that the website layout is not indicative of a final version. It's just a tech demo.</p>
    </div>
    <script src="https://3Dmol.org/build/3Dmol-min.js"></script>
    <script src="three.js"></script>
    <script src="TrackballControls.js"></script>
    <script src="GLTFLoader.js"></script>
    <script src="app.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
	
	var widgets = {};
    
    function step_frame(slider, viewerID) {
        let frameNum = parseInt(slider.value); 
        let viewer = widgets[viewerID];
        viewer.setFrame(frameNum);
        viewer.render();
    }
	
	
	$(document).ready(function(){
		$.get("public/IRC.xyz", function(data) {
		
			let viewer = $3Dmol.createViewer("IRC");
			let set = {
				interval: 50,
				animation: 'forward',
			}
			viewer.addModelsAsFrames(data, "xyz");
			
			viewer.setBackgroundColor(0x000000);
			viewer.setStyle({}, {stick: {radius: 0.15, colorscheme: {'prop': 'elem', map: {'F': '#00ffff'}}}, sphere: {scale: 0.25, colorscheme: {'prop': 'elem', map: {'F': '#00ffff'}}}});
			
			let selection = {serial: 0};			
			viewer.zoomTo();
			viewer.zoom(1.8);
			viewer.rotate(180, {x: 0, y: 1, z: 0});	// want to have nucleophile to the left.		
			viewer.render();
	
			let slider = document.getElementById("IRC_slider");
			slider.max = viewer.getNumFrames();
			
			widgets["IRC"] = viewer;
		});
	}); 
	</script>
</body>
</html>

